function EventEmitter(a){const b=a||{},c=Object.keys(b);this._events=0<c.length?c.reduce(function(a,c){return a[c]=Array.isArray(b[c])?b[c]:[b[c]],a},{}):{}}EventEmitter.prototype._eventsWillBeFiredOnce={},EventEmitter.prototype.on=function(a,b,c=null){if("function"!=typeof b||"string"!=typeof a)return!1;this._events.hasOwnProperty(a)||(this._events[a]=[]),this._eventsWillBeFiredOnce.hasOwnProperty(a)||(this._eventsWillBeFiredOnce[a]=[]);const d="[object Object]"===Object.prototype.toString.call(c)?c:{once:!1},e=this._events[a].push(b);return d.once&&!0===d.once&&this._eventsWillBeFiredOnce[a].push(e-1),!0},EventEmitter.prototype.once=function(a,b){return this.on(a,b,{once:!0})},EventEmitter.prototype.emit=function(a,b=[]){if(!this._events.hasOwnProperty(a))return!1;const c=Array.isArray(b)?b:[b],d=this._events[a].length,e=[];for(let f=0;f<d;f++){const b=this._events[a][f].apply(this,c);e.push(b)}if(this._eventsWillBeFiredOnce.hasOwnProperty(a))for(var f=0;f<this._eventsWillBeFiredOnce[a].length;f++)this.removeListener(a,this._eventsWillBeFiredOnce[a][f]);return e},EventEmitter.prototype.removeListener=function(a,b){this._events[a].splice(b,1)},EventEmitter.prototype.removeListeners=function(a){return!("string"!=typeof a)&&!!this._events.hasOwnProperty(a)&&(this._events[a]=[],this._eventsWillBeFiredOnce.hasOwnProperty(a)&&(this._eventsWillBeFiredOnce[a]=[]),!0)},EventEmitter.prototype.flushEventEmitter=function(){this._events={},this._eventsWillBeFiredOnce={}},module.exports=EventEmitter;